"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[7985],{7985:(e,s,a)=>{a.r(s),a.d(s,{default:()=>_});var d=a(72791),l=a(34855),i=a(33833),c=a(94420),r=a(70859),n=a(75985),t=a(13974),o=a(90432),h=a(72426),m=a.n(h),x=a(11087),p=a(29750),v=a(61134),u=a(49923),j=a(44989),b=a.n(j),g=a(55294),N=a(57664);const y="".concat("https://desktopcrm.com:51/v1"),f=(e,s)=>async a=>{try{a((0,N.OQ)());const d={headers:{"Content-Type":"application/json","x-access-token":e}};return await g.Z.post("".concat(y,"/user/dashboard/get-pricing"),s,d).then((async e=>{var s;return 200!==(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.statusCode)?(n.Am.error(e.data.message),a((0,N.r6)(e.data.message))):(await a((0,N.Qb)(e.data.data.pricingData)),!0)}))}catch(d){a((0,N.r6)(d.message))}};var w=a(22316),S=a(80184);const C=e=>{var s,a,d,l,i,r,n,t,o;let{authUser:h,dispatch:m,token:x}=e;const{handleSubmit:p,control:j,formState:{errors:g}}=(0,v.cI)({}),{pricing:N,isLoading:y}=(0,c.v9)((e=>e.pricing));return(0,S.jsxs)("div",{className:"card shadow-lg  m-5",style:{height:"50%",overflow:"scroll"},children:[(0,S.jsx)("div",{className:"card-header bg-primary",children:(0,S.jsx)("div",{className:"card-title text-white",children:"Pricing Generator"})}),(0,S.jsxs)("div",{className:"card-body",children:[(0,S.jsxs)("form",{onSubmit:p((e=>{const s={accountSid:h.accountSid,authToken:h.authToken,country_code:e.country.value};m(f(x,s)),console.log("\ud83d\ude80 ~ handlePriceGeneration ~ data:",s)})),className:"d-flex gap-3 card-body pb-0",children:[(0,S.jsx)("div",{className:"col-md-10 col-sm-6",children:(0,S.jsx)(u.Z,{name:"country",placeholder:"Select Country",label:"Generate Pricing by selecting desired country",control:j,errors:g,mb:!1,options:b()().getData()||[],rules:{required:{value:!0,message:"Field required!"}}})}),(0,S.jsx)("div",{className:"pt-5",children:y?(0,S.jsx)(w.Z,{}):(0,S.jsx)("button",{className:"btn btn-primary",children:"Submit"})})]}),!y&&N&&(0,S.jsx)("div",{children:(0,S.jsx)("div",{className:"card-body pt-0",children:(0,S.jsxs)("div",{className:"d-flex gap-2",children:[(0,S.jsxs)("div",{className:"col-md-6 col-sm-6",children:[(0,S.jsx)("div",{className:"bg-primary p-2 rounded-top text-white text-center fw-bold",children:"Voice"}),(0,S.jsx)("div",{className:"border border-primary",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:"Inbound Call"}),(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:2*parseFloat(null===N||void 0===N||null===(s=N.voicePricing)||void 0===s||null===(a=s.inboundCallPrices[0])||void 0===a?void 0:a.base_price)||0})]})}),(0,S.jsx)("div",{className:"border border-primary",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:"Outbound Call"}),(0,S.jsxs)("div",{className:"border col-6 text-center p-1",children:[" ",2*parseFloat(null===N||void 0===N||null===(d=N.voicePricing)||void 0===d||null===(l=d.outboundPrefixPrices[1])||void 0===l?void 0:l.base_price)||0]})]})})," "]}),(0,S.jsxs)("div",{className:"col-md-6 col-sm-6",children:[(0,S.jsx)("div",{className:"bg-primary p-2 rounded-top text-white text-center fw-bold",children:"SMS"}),(0,S.jsx)("div",{className:"border border-primary",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:"Inbound SMS"}),(0,S.jsxs)("div",{className:"border col-6 text-center p-1",children:[" ",2*parseFloat(null===N||void 0===N||null===(i=N.smsPricing)||void 0===i||null===(r=i.inboundSmsPrices[0])||void 0===r?void 0:r.base_price)||0]})]})}),(0,S.jsx)("div",{className:"border border-primary",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:"Outbound SMS"}),(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:2*parseFloat(null===N||void 0===N||null===(n=N.smsPricing)||void 0===n||null===(t=n.outboundSmsPrices[0])||void 0===t||null===(o=t.prices[0])||void 0===o?void 0:o.base_price)||0})]})})," "]})]})})})]})]})},k=()=>{const{pushNotification:e}=(0,d.useContext)(p.J),{user:s,token:a}=(0,c.v9)((e=>e.auth)),{balanceDetails:l}=(0,c.v9)((e=>e.balance)),{payments:h}=(0,c.v9)((e=>e.payment)),[v,u]=(0,d.useState)(null),j=(0,c.I0)();(0,d.useEffect)((()=>{j((0,o.sb)(a)),j((0,r.$q)(a))}),[a,j]);return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{className:"hk-pg-wrapper pb-0",children:(0,S.jsxs)("div",{className:"hk-pg-body py-0",children:[(0,S.jsx)("div",{className:"contactapp-wrap",children:(0,S.jsx)("div",{className:"contactapp-content",children:(0,S.jsxs)("div",{className:"d-flex border w-100",children:[(0,S.jsxs)("div",{className:"w-50 m-5",children:[(0,S.jsx)("div",{className:"card shadow-lg border-primary",style:{height:"max-content"},children:(0,S.jsxs)("div",{className:"m-5",style:{fontSize:"25px",fontWeight:"bolder"},children:[(0,S.jsxs)("div",{className:"",children:[(0,S.jsxs)("div",{className:"float-start mt-2 me-5",children:[(0,S.jsx)("div",{class:"lh-1 text-white bg-primary rounded-circle p-3 d-flex align-items-center justify-content-center",children:(0,S.jsx)(t.oQC,{size:25})})," "]}),(0,S.jsx)("p",{className:"fw-bolder",children:"Available Credit "}),(0,S.jsxs)("span",{children:["$",null!==l&&void 0!==l&&l.credit?(null===l||void 0===l?void 0:l.credit)/100:0]})]}),(0,S.jsxs)("div",{className:"float-end d-flex gap-1 justify-content-end",children:[(0,S.jsxs)("div",{className:"form-group col-6 pt-1 d-flex",children:[(0,S.jsx)("span",{children:"$"}),(0,S.jsx)("input",{type:"number",className:"form-control p-1 px-2 ",placeholder:"Amount",required:!0,min:10,onChange:e=>u(e.target.value)})]}),v<5||v>100?(0,S.jsx)("div",{children:(0,S.jsx)("button",{className:"btn btn-primary btn-sm ",style:{paddingInline:"10px"},onClick:()=>n.Am.error("Amount must be less than equal to 100 and greater than equal to 10"),children:"Add Credit"})}):(0,S.jsx)("div",{children:(0,S.jsx)("button",{"data-bs-toggle":"modal","data-bs-target":"#add_payment_form",className:"btn btn-primary btn-sm ",style:{paddingInline:"10px"},onClick:()=>{j((0,r.Az)(a,{currency:"usd",amount:100*v}))},children:"Add Credit"})})]})]})}),(0,S.jsx)("div",{className:" p-0",style:{height:"100%"},children:(0,S.jsxs)("div",{className:"card",style:{height:"72%"},children:[(0,S.jsx)("div",{className:"card-header bg-primary",children:(0,S.jsx)("div",{className:"card-title text-white fw-bolder",children:"Balance Logs"})}),(0,S.jsx)("div",{className:"card-body",style:{height:"480px",overflow:"scroll",scrollBehavior:"smooth"},children:(0,S.jsxs)("table",{class:"table table-hover",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{className:"sticky-top rounded",children:[(0,S.jsx)("th",{scope:"col",children:"#"}),(0,S.jsx)("th",{scope:"col",children:"Description"}),(0,S.jsx)("th",{scope:"col",children:"Amount Paid"}),(0,S.jsx)("th",{scope:"col",children:"Date"})]})}),(0,S.jsx)("tbody",{children:(null===h||void 0===h?void 0:h.length)>0?null===h||void 0===h?void 0:h.map(((e,s)=>(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{scope:"row",children:s}),(0,S.jsx)("td",{children:null===e||void 0===e?void 0:e.description}),(0,S.jsx)("td",{children:(null===e||void 0===e?void 0:e.amount)/100}),(0,S.jsx)("td",{children:m()(null===e||void 0===e?void 0:e.created_at).format("DD MMM,YYYY")})]},s))):(0,S.jsx)("p",{children:"No Record"})})]})})]})})]}),(0,S.jsxs)("div",{className:"w-50",style:{height:"100%"},children:[(0,S.jsx)(C,{authUser:s,dispatch:j,token:a}),(0,S.jsxs)("div",{className:"card shadow-lg m-5",style:{height:"38%"},children:[(0,S.jsx)("div",{className:"card-header bg-primary",children:(0,S.jsx)("div",{className:"card-title text-white",children:"Usage"})}),(0,S.jsx)("div",{className:"card-body",children:(0,S.jsxs)("div",{id:"accordionSimpleExample",class:"accordion accordion-simple single-email-thread",children:[(0,S.jsxs)("div",{class:"accordion-item",children:[(0,S.jsx)("div",{id:"simple-headingOne",class:"accordion-header",children:(0,S.jsx)("div",{"data-bs-toggle":"collapse","data-bs-target":"#call_usage",role:"button","aria-expanded":"false",className:"px-3 py-3 border fw-bold",children:"Call Usage"})}),(0,S.jsx)("div",{id:"call_usage",class:"accordion-collapse collapse",children:(0,S.jsxs)("div",{class:"accordion-body",children:[" ",(0,S.jsx)(x.rU,{to:"/call-history",children:"Check Call Usage Logs"})]})})]}),(0,S.jsxs)("div",{class:"accordion-item",children:[(0,S.jsx)("div",{id:"simple-headingOne",class:"accordion-header",children:(0,S.jsx)("div",{"data-bs-toggle":"collapse","data-bs-target":"#sms_usage",role:"button","aria-expanded":"false",className:"px-3 py-3 border fw-bold ",children:"SMS Usage"})}),(0,S.jsx)("div",{id:"sms_usage",class:"accordion-collapse collapse",children:(0,S.jsxs)("div",{class:"accordion-body",children:[" ",(0,S.jsx)(x.rU,{to:"/messages-logs",children:"Check SMS Usage Logs"})]})})]})]})})]})]})]})})}),(0,S.jsx)(i.Z,{afterPayment:async()=>{const d={user_id:s.id,credit:100*v};if(!0===await j((0,o.KG)(a,d))){const a={user_id:s.id,notification:"Your account balance has been credited with amount $".concat(v),type:"balance_credit"};e(a)}},description:"Credit added"})]})})})},_=()=>(0,S.jsx)(l.Z,{component:(0,S.jsx)(k,{})})}}]);
//# sourceMappingURL=7985.6ee3376c.chunk.js.map