"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[1425],{40902:(e,a,s)=>{s.d(a,{LY:()=>o,k4:()=>r,s6:()=>i});var t=s(11222),n=s(54756),c=s(73422);const d="".concat("https://desktopcrm.com:51/v1"),r=(e,a)=>async s=>{try{s((0,n.W)());const r={headers:{"Content-Type":"application/json","x-access-token":e}};await t.A.post("".concat(d,"/user/packages/add-package"),a,r).then((a=>{var t;if(200!==(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.statusCode))return c.oR.error(a.data.message),s((0,n.xk)(a.data.message));s((0,n.Eb)(a.data.message)),c.oR.success(a.data.message),s(o(e,a.data.data.id))}))}catch(r){s((0,n.xk)(r.message))}},o=(e,a)=>async s=>{try{s((0,n.W)());const r={headers:{"Content-Type":"application/json","x-access-token":e}};await t.A.get("".concat(d,"/user/packages/get-package/").concat(a),r).then((e=>{var a;if(console.log("\ud83d\ude80 ~ .then ~ response:",e),200!==(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.statusCode))return c.oR.error(e.data.message),s((0,n.xk)(e.data.message));s((0,n.$Q)(e.data.data.packageDetails))}))}catch(r){s((0,n.xk)(r.message))}},i=(e,a,s)=>async r=>{try{r((0,n.W)());const i={headers:{"Content-Type":"application/json","x-access-token":e}};await t.A.put("".concat(d,"/user/packages/update-package/").concat(a),s,i).then((a=>{var s;if(console.log("\ud83d\ude80 ~ .then ~ response:",a),200!==(null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.statusCode))return c.oR.error(a.data.message),r((0,n.xk)(a.data.message));r((0,n.y6)(a.data.message)),c.oR.success(a.data.message),r(o(e,a.data.data.id))}))}catch(i){r((0,n.xk)(i.message))}}},24837:(e,a,s)=>{s.d(a,{Fr:()=>o,d:()=>r,tZ:()=>i});var t=s(11222),n=s(11864),c=s(73422);const d="".concat("https://desktopcrm.com:51/v1"),r=(e,a)=>async s=>{try{s((0,n.ND)());const r={headers:{"Content-Type":"application/json","x-access-token":e}};return await t.A.post("".concat(d,"/user/rates/add-rate"),a,r).then((async a=>{var t;return 200!==(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.statusCode)?(c.oR.error(a.data.message),s((0,n.xk)(a.data.message))):(await s((0,n.pT)(a.data.message)),c.oR.success(a.data.message),await s(i(e,1)),!0)}))}catch(r){s((0,n.xk)(r.message))}},o=(e,a,s)=>async r=>{try{r((0,n.ND)());const o={headers:{"Content-Type":"application/json","x-access-token":e}};return await t.A.put("".concat(d,"/user/rates/update-rate/").concat(a),s,o).then((async a=>{var s;return 200!==(null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.statusCode)?(c.oR.error(a.data.message),r((0,n.xk)(a.data.message))):(await r((0,n.LC)(a.data.message)),c.oR.success(a.data.message),await r(i(e,1)),!0)}))}catch(o){r((0,n.xk)(o.message))}},i=(e,a)=>async s=>{try{s((0,n.ND)());const r={headers:{"Content-Type":"application/json","x-access-token":e}};await t.A.get("".concat(d,"/user/rates/plan-rate/").concat(a),r).then((e=>{var a;if(console.log("\ud83d\ude80 ~ .then ~ response:",e),200!==(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.statusCode))return c.oR.error(e.data.message),s((0,n.xk)(e.data.message));s((0,n.nm)(e.data.data.rateDetail))}))}catch(r){s((0,n.xk)(r.message))}}},81425:(e,a,s)=>{s.r(a),s.d(a,{default:()=>v});var t=s(82483),n=s(16575),c=s(7817),d=s(23080),r=(s(1611),s(91965)),o=(s(34304),s(24837)),i=s(28846),l=s(40902),p=s(710),u=s(56723);const m=()=>{const{handleSubmit:e,control:a,setValue:s,formState:{errors:n}}=(0,d.mN)(),m=(0,r.wA)(),{token:v,user_id:h}=(0,r.d4)((e=>e.auth)),{planRates:g}=(0,r.d4)((e=>e.plan_rate)),{isLoading:x,packageDetails:k}=(0,r.d4)((e=>e.package)),[j,y]=(0,t.useState)([{id:"1",name:"",price:"",discount:"",content:[]}]);(0,t.useEffect)((()=>{m((0,l.LY)(v,1))}),[m,v]),(0,t.useEffect)((()=>{if(null!==k&&void 0!==k&&k.id){var e;const a=(null===k||void 0===k?void 0:k.packages)&&(null===(e=JSON.parse(null===k||void 0===k?void 0:k.packages))||void 0===e?void 0:e.packagesDetails);y(a),null===a||void 0===a||a.map((e=>{var a;s("package-name-".concat(e.id),e.name),s("package-price-".concat(e.id),e.price),s("package-discount-".concat(e.id),e.discount),null===e||void 0===e||null===(a=e.content)||void 0===a||a.map(((a,t)=>{s("content-".concat(e.id,"-").concat(t),a)}))}))}}),[k,s]);(0,t.useEffect)((()=>{m((0,o.tZ)(v,1))}),[m,v]),(0,t.useEffect)((()=>{g&&(s("starter",null===g||void 0===g?void 0:g.starter),s("growth",null===g||void 0===g?void 0:g.growth),s("enterprise",null===g||void 0===g?void 0:g.enterprise))}),[g,s]);return(0,u.jsx)("div",{className:"hk-pg-wrapper pb-0",children:(0,u.jsx)("div",{className:"hk-pg-body py-0",children:(0,u.jsxs)("div",{className:"contactapp-wrap",children:[(0,u.jsx)("div",{className:"border border-1 rounded",children:(0,u.jsx)("header",{className:"taskboard-header pt-3 pb-2 px-4",children:(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("div",{className:"taskboardapp-title link-dark",href:"/",children:(0,u.jsx)("h3",{children:"Packages"})}),(0,u.jsx)("div",{className:"",children:(0,u.jsx)("button",{className:"btn btn-primary",onClick:()=>{null!==k&&void 0!==k&&k.id?m((0,l.s6)(v,null===k||void 0===k?void 0:k.id,{packages:{packagesDetails:j},user_id:h})):m((0,l.k4)(v,{packages:{packagesDetails:j},user_id:h}))},children:"Submit"})})," "]})})}),(0,u.jsx)("div",{className:"contactapp-content",style:{width:"100%"},children:x?(0,u.jsx)("div",{className:"w-100",children:(0,u.jsx)(p.A,{})}):(0,u.jsxs)("div",{className:"d-flex gap-5 w-100 p-5",style:{overflow:"scroll"},children:[(null===j||void 0===j?void 0:j.length)>0&&(null===j||void 0===j?void 0:j.map(((e,s)=>{var t,d;return(0,u.jsxs)("div",{className:"card rouded shadow col-md-3 ",style:{height:"max-content"},children:[(0,u.jsxs)("div",{className:"card-header bg-primary",children:[(0,u.jsx)("div",{className:"card-title text-white",children:"Package Details"}),(0,u.jsx)("span",{className:"col-1 p-2 btn btn-icon btn-sm mt-2 btn-danger",onClick:()=>{return a=e.id,void y((e=>null===e||void 0===e?void 0:e.filter((e=>e.id!==a))));var a},children:(0,u.jsx)(i.qbC,{className:"mb-2"})})]}),(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsx)("div",{className:"col-sm-12",children:(0,u.jsx)(c.A,{name:"package-name-".concat(e.id),placeholder:"Name",label:"Package Name",control:a,onChange:a=>{return s=e,t=a.target.value,void y((e=>e.map((e=>e.id===s.id?{...e,name:t}:e))));var s,t},rules:{required:{value:!0,message:"Field required!"}},errors:n})}),(0,u.jsx)("div",{className:"col-sm-12",children:(0,u.jsx)(c.A,{name:"package-price-".concat(e.id),placeholder:"Price",label:"Package Price",control:a,onChange:a=>{return s=e,t=a.target.value,void y((e=>e.map((e=>e.id===s.id?{...e,price:t}:e))));var s,t},rules:{required:{value:!0,message:"Field required!"}},errors:n})}),(0,u.jsx)("div",{className:"col-sm-12",children:(0,u.jsx)(c.A,{name:"package-discount-".concat(e.id),placeholder:"Price",type:"number",label:"Yearly Discount Percentage",control:a,onChange:a=>{return s=e,t=a.target.value,void y((e=>e.map((e=>e.id===s.id?{...e,discount:t}:e))));var s,t},rules:{required:{value:!0,message:"Field required!"}},errors:n})}),(0,u.jsx)("div",{className:"title title-xs title-wth-divider text-primary text-uppercase my-4",children:(0,u.jsx)("span",{children:"Package Content"})}),(0,u.jsx)("div",{className:"",children:(null===(t=e.content)||void 0===t?void 0:t.length)>0?null===(d=e.content)||void 0===d?void 0:d.map(((s,t)=>(0,u.jsxs)("div",{className:"col-12 d-flex gap-2",children:[(0,u.jsx)("div",{className:"col-11 py-2",children:(0,u.jsx)(c.A,{name:"content-".concat(e.id,"-").concat(t),placeholder:"Content Name",onChange:a=>((e,a,s)=>{y((t=>t.map((t=>t.id===e?{...t,content:t.content.map(((e,t)=>t===a?s:e))}:t))))})(e.id,t,a.target.value),mb:!0,control:a,rules:{required:{value:!0,message:"Field required!"}},errors:n})}),(0,u.jsx)("span",{className:"col-1 p-2 btn btn-icon btn-sm mt-2 btn-danger",onClick:()=>((e,a)=>{y((s=>s.map((s=>s.id===e?{...s,content:s.content.filter(((e,s)=>s!==a))}:s))))})(e.id,t),children:(0,u.jsx)(i.qbC,{className:"mb-2"})})]},t))):(0,u.jsx)("p",{children:"No content added"})}),(0,u.jsxs)("div",{className:" py-2",children:[(0,u.jsxs)("button",{onClick:()=>{return a=e.id,void y((e=>null===e||void 0===e?void 0:e.map((e=>e.id===a?{...e,content:[...e.content,"Package Content"]}:e))));var a},type:"button",className:"btn btn-icon btn-primary btn-xs mb-2",children:[(0,u.jsx)("span",{children:(0,u.jsx)(i.OiG,{})})," "]}),(0,u.jsxs)("span",{className:"text-primary",style:{fontSize:"13px"},children:[" ","Add Content"]})]})]})]},s)}))),(0,u.jsx)("div",{className:"col-md-3 d-flex justify-content-center border rounded",style:{height:"100px"},children:(0,u.jsx)("div",{className:"my-auto border border-primary p-3 rounded",style:{cursor:"pointer"},onClick:()=>{const e={id:(null===j||void 0===j?void 0:j.length)+1,content:[]};y([...j,e])},children:(0,u.jsx)("p",{className:"text-primary",children:"Add Package"})})})]})})]})})})},v=()=>(0,u.jsx)(n.A,{component:(0,u.jsx)(m,{})})}}]);
//# sourceMappingURL=1425.216687b6.chunk.js.map