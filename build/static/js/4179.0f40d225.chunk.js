"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[4179],{60683:(e,s,a)=>{a.d(s,{A:()=>m});var n=a(82483),l=a(28475),t=a.n(l),i=(a(42511),a(84670),a(23080)),c=a(34304),o=a.n(c),d=a(94690),r=a.n(d),h=a(56723);const u=n.forwardRef(((e,s)=>{const[a,l]=(0,n.useState)(!1),{title:c,style:d,type:u,errors:m,defaultValue:v,isDisabled:x,dateTime:p=!0,customStyles:j,onChange:b,maxDate:g,isHighLight:f=!1,showYearPicker:N,showTime:w,showIcon:y,showTimeSelectOnly:k,label:D,...C}=e,{field:S,fieldState:Y}=(0,i.as)(e);let _=o().get(m,e.name);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.xI,{autoFocus:!1,name:null===e||void 0===e?void 0:e.name,control:null===e||void 0===e?void 0:e.control,rules:null===e||void 0===e?void 0:e.rules,defaultValue:v,render:a=>{let{field:n}=a;let i=new Date(null===n||void 0===n?void 0:n.value);return function(e){let s=new Date(e);return s instanceof Date&&!isNaN(s)}(null===n||void 0===n?void 0:n.value)||(i=""),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("label",{class:"form-label-group",children:D}),(0,h.jsx)(t(),{...n,ref:s,autoComplete:"off",autoFocus:!1,placeholderText:"Select Date",onChange:s=>{n.onChange(k?r()(s).format("HH:mm:ss"):r()(s).format("yyyy-MM-DD")),b&&b(s,null===e||void 0===e?void 0:e.name)},selected:i,onFocus:()=>l(!0),onBlur:()=>{l(!1)},dateFormat:N?"yyyy":"yyyy-MM-DD HH:mm:ss",className:"form-control text-lg  ".concat(x?"opacity-50":"","\n                                   ").concat(f&&" focus:bg-dark   "),placeholder:e.placeholder?e.placeholder:"",disabled:x,maxDate:null===e||void 0===e?void 0:e.maxDate,minDate:null===e||void 0===e?void 0:e.minDate,showTimeSelect:w,showIcon:y,showTimeSelectOnly:k,isClearable:!0,timeFormat:"HH:mm:ss",timeIntervals:15,showYearPicker:N||!1,...C})]})}}),e.rules&&_&&(0,h.jsx)("p",{className:" text-xs text-red-600 h-3",id:"email-error",children:e.rules&&_&&e.rules&&_.message})]})}));u.displayName="DatePickerFeild";const m=u},6732:(e,s,a)=>{a.d(s,{A:()=>o});var n=a(82483),l=a(30109),t=a.n(l),i=a(28846),c=a(56723);const o=function(e){let{itemsPerPage:s,items:a,dataFromChild:l}=e;const o=(0,n.useRef)(),[d,r]=(0,n.useState)(0),h=d+s,u=null===a||void 0===a?void 0:a.slice(d,h),m=Math.ceil(a.length/s);return console.log(o.current,u,u!==o.current),(0,n.useEffect)((()=>{(async()=>{await new Promise((e=>setTimeout(e,1e3))),((e,s)=>{if((null===e||void 0===e?void 0:e.length)!==(null===s||void 0===s?void 0:s.length))return!1;for(let a=0;a<e.length;a++)if(e[a]!==s[a])return!1;return!0})(u,o.current)||(l(u),o.current=u)})()}),[u,o,l]),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",boxSizing:"border-box",width:"100%",height:"100px"},children:(0,c.jsx)(t(),{breakClassName:"item break-me ",containerClassName:"d-flex justify-content-center",disabledClassName:"disabled-page",marginPagesDisplayed:2,nextClassName:"arrows btn btn-light ",pageClassName:"item pagination-page ",previousClassName:"arrows btn btn-light",nextLabel:(0,c.jsx)(i.l_J,{}),previousLabel:(0,c.jsx)(i.U_G,{}),breakLabel:"...",onPageChange:e=>{const a=e.selected*s;console.log("User requested page number ".concat(e.selected+1,", which is offset ").concat(a)),r(a),l(u)},pageRangeDisplayed:5,pageCount:m,renderOnZeroPageCount:null,activeClassName:"pagination_active"})})})}},64179:(e,s,a)=>{a.r(s),a.d(s,{default:()=>k});var n=a(82483),l=a(16575),t=a(28846),i=a(99492),c=a(93970),o=a(52724),d=a(56723);const r=e=>{let{onSendData:s,contactsData:a,onToggleEdit:l,subscriptions:r}=e;const[h,u]=(0,n.useState)("all"),{handleToggleShowLeadDetail:m}=(0,n.useContext)(i.d);return(0,d.jsxs)("nav",{className:"contactapp-sidebar",children:[(0,d.jsx)("div",{"data-simplebar":!0,className:"nicescroll-bar",children:(0,d.jsx)("div",{className:"menu-content-wrap",children:(0,d.jsx)("div",{className:"menu-group p-1",children:(0,d.jsxs)("ul",{className:"nav nav-light navbar-nav flex-column",children:[(0,d.jsx)("li",{id:"all_contacts",className:"nav-item ".concat("all"===h?"active":""),children:(0,d.jsxs)("button",{onClick:()=>{const e=r;u("all"),m(!1),s(e)},className:"nav-link btn-block",children:[(0,d.jsx)("span",{className:"nav-icon-wrap",children:(0,d.jsx)("span",{className:"feather-icon",children:(0,d.jsx)(c.Wwd,{})})}),(0,d.jsx)("span",{className:"nav-link-text",children:"All Subscriptions"})]})}),(0,d.jsx)("li",{className:"nav-item ".concat("delayed"===h?"active":""),children:(0,d.jsxs)("button",{className:"nav-link btn-block",onClick:()=>{const e=null===r||void 0===r?void 0:r.filter((e=>"delayed"===e.status));u("delayed"),m(!1),s(e)},children:[(0,d.jsx)("span",{className:"nav-icon-wrap",children:(0,d.jsx)("span",{className:"feather-icon",children:(0,d.jsx)(o.LEV,{})})}),(0,d.jsx)("span",{className:"nav-link-text",children:"Delayed"})]})}),(0,d.jsx)("li",{className:"nav-item ".concat("subscription-required"===h?"active":""),children:(0,d.jsxs)("button",{className:"nav-link btn-block",onClick:()=>{const e=null===r||void 0===r?void 0:r.filter((e=>"subscription-required"===e.status));u("subscription-required"),m(!1),s(e)},children:[(0,d.jsx)("span",{className:"nav-icon-wrap",children:(0,d.jsx)("span",{className:"feather-icon",children:(0,d.jsx)(c.CBw,{})})}),(0,d.jsx)("span",{className:"nav-link-text",children:"Subscription Required"})]})}),(0,d.jsx)("li",{className:"nav-item ".concat("active"===h?"active":""),children:(0,d.jsxs)("button",{id:"deleted_contacts",onClick:()=>{const e=r.filter((e=>1===e.active));u("active"),s(e),m(!1),l(!1)},className:"nav-link btn-block",children:[(0,d.jsx)("span",{className:"nav-icon-wrap",children:(0,d.jsx)("span",{className:"feather-icon",children:(0,d.jsx)(t.CMH,{})})}),(0,d.jsx)("span",{className:"nav-link-text",children:"Active"})]})})]})})})}),(0,d.jsx)("div",{className:"contactapp-fixednav",children:(0,d.jsx)("div",{className:"hk-toolbar"})})]})},h=e=>{let{onDataFromChild:s,activeBar:a}=e;return(0,d.jsxs)("header",{className:"contact-header",children:[(0,d.jsx)("div",{className:"d-flex align-items-center",children:(0,d.jsx)("span",{className:"fs-5 fw-bold",children:"Subscriptions"})}),(0,d.jsxs)("div",{className:"contact-options-wrap",children:[(0,d.jsx)("a",{className:"btn btn-icon btn-flush-dark flush-soft-hover dropdown-toggle no-caret active","data-bs-toggle":"dropdown",children:(0,d.jsx)("span",{className:"icon",children:(0,d.jsx)("span",{className:"feather-icon",children:(0,d.jsx)(t.svy,{})})})}),(0,d.jsxs)("div",{className:"dropdown-menu dropdown-menu-end",children:[(0,d.jsxs)("a",{className:"dropdown-item ".concat("list"===a?"active":""),onClick:()=>s("list"),children:[(0,d.jsx)("span",{className:"feather-icon dropdown-icon",children:(0,d.jsx)(t.svy,{})}),(0,d.jsx)("span",{children:"List View"})]}),(0,d.jsxs)("a",{className:"dropdown-item ".concat("grid"===a?"active":""),onClick:()=>s("grid"),children:[(0,d.jsx)("span",{className:"feather-icon dropdown-icon",children:(0,d.jsx)(t.tSG,{})}),(0,d.jsx)("span",{children:"Grid View"})]})]}),(0,d.jsx)("a",{className:"btn btn-icon btn-flush-dark btn-rounded flush-soft-hover no-caret d-sm-inline-block d-none","data-bs-toggle":"tooltip","data-placement":"top",title:"","data-bs-original-title":"Refresh",children:(0,d.jsx)("span",{className:"icon",children:(0,d.jsx)("span",{className:"feather-icon",children:(0,d.jsx)(t.Bo9,{})})})}),(0,d.jsx)("div",{className:"v-separator d-lg-block d-none"}),(0,d.jsx)("a",{className:"btn btn-icon btn-flush-dark btn-rounded flush-soft-hover hk-navbar-togglable d-sm-inline-block d-none","data-bs-toggle":"tooltip","data-placement":"top",title:"","data-bs-original-title":"Collapse",children:(0,d.jsxs)("span",{className:"icon",children:[(0,d.jsx)("span",{className:"feather-icon",children:(0,d.jsx)(t.Ucs,{})}),(0,d.jsx)("span",{className:"feather-icon d-none",children:(0,d.jsx)(t.Vr3,{})})]})})]}),(0,d.jsx)("div",{className:"hk-sidebar-togglable"})]})};var u=a(91965),m=a(7874),v=a(710),x=a(94690),p=a.n(x),j=a(60683),b=a(23080),g=a(90205);const f=e=>{let{subscriptionsArray:s,onToggleEdit:a,isEdit:l,users:t}=e;const{handleSubmit:c,control:o,setValue:r,reset:h,formState:{errors:x}}=(0,b.mN)({}),{handleToggleShowLeadDetail:f}=(0,n.useContext)(i.d),N=(0,u.wA)(),{token:w}=(0,u.d4)((e=>e.auth)),{isLoading:y}=(0,u.d4)((e=>e.subscription));(0,n.useEffect)((()=>{w&&N((0,m.EC)(w))}),[N,w]);const k=(e,s)=>{console.log("\ud83d\ude80 ~ handleChangeDate ~ id,value:",e,s),N((0,g.YI)(w,e,{end_date:s}))};return(0,d.jsx)("div",{className:"contact-list-view",children:!l&&(0,d.jsx)(d.Fragment,{children:y?(0,d.jsx)(v.A,{}):(0,d.jsxs)("table",{className:"table w-100 mb-5",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Client"}),(0,d.jsx)("th",{children:"Plan"}),(0,d.jsx)("th",{children:"Plan Type"}),(0,d.jsx)("th",{children:"Start Date"}),(0,d.jsx)("th",{children:"End Date"}),(0,d.jsx)("th",{children:"Status"})]})}),(0,d.jsx)("tbody",{children:(null===s||void 0===s?void 0:s.length)>0&&(null===s||void 0===s?void 0:s.map((e=>{var s,a;return(0,d.jsxs)("tr",{children:[(0,d.jsxs)("td",{children:[(0,d.jsxs)("p",{children:[" ",null===t||void 0===t||null===(s=t.filter((s=>s.id===(null===e||void 0===e?void 0:e.customer_id)))[0])||void 0===s?void 0:s.name]}),(0,d.jsxs)("p",{className:"border-top border-primary",style:{width:"max-content"},children:[" ",null===t||void 0===t||null===(a=t.filter((s=>s.id===(null===e||void 0===e?void 0:e.customer_id)))[0])||void 0===a?void 0:a.email]})]}),(0,d.jsx)("td",{className:"",children:(0,d.jsx)("span",{style:{fontSize:"14px"},children:null===e||void 0===e?void 0:e.plan})}),(0,d.jsx)("td",{children:null===e||void 0===e?void 0:e.plan_type}),(0,d.jsxs)("td",{children:[" ",p()(null===e||void 0===e?void 0:e.start_date).format("DD MMM, YYYY")]}),(0,d.jsxs)("td",{children:[" ",(0,d.jsx)("div",{className:"col-sm-6",style:{width:"200px"},children:(0,d.jsx)(j.A,{name:"end-date-".concat(null===e||void 0===e?void 0:e.end_date),defaultValue:p()(null===e||void 0===e?void 0:e.end_date).format("YYYY-MM-DD"),onChange:s=>k(null===e||void 0===e?void 0:e.id,p()(s).format("YYYY-MM-DD")),errors:x,control:o})})]}),(0,d.jsx)("td",{children:new Date(null===e||void 0===e?void 0:e.end_date)>new Date(Date.now())?"Active":"Stopped"})]})})))})]})})})};var N=a(49678),w=a(6732);const y=()=>{const{showLeadDetails:e}=(0,n.useContext)(i.d),s=(0,u.wA)(),{token:a,user:l}=(0,u.d4)((e=>e.auth)),[t,c]=(0,n.useState)([]),[o,m]=(0,n.useState)([]),[v,x]=(0,n.useState)(!1),[p,j]=(0,n.useState)("list"),{subscriptions:b}=(0,u.d4)((e=>e.subscription)),{users:y}=(0,u.d4)((e=>e.user));(0,n.useEffect)((()=>{if((null===b||void 0===b?void 0:b.length)>0){const e=[];null===b||void 0===b||b.map((s=>{const a=null===y||void 0===y?void 0:y.filter((e=>e.id===(null===s||void 0===s?void 0:s.customer_id)))[0],n={...s,customer_details:a};return null===e||void 0===e?void 0:e.push(n)})),c(b),m(b)}}),[b,y]),(0,n.useEffect)((()=>{s((0,N.lo)(a)),s((0,g.hR)(a))}),[a,s]);const k=e=>{};return(0,d.jsx)("div",{className:"hk-pg-wrapper pb-0",children:(0,d.jsx)("div",{className:"hk-pg-body py-0",children:(0,d.jsx)("div",{className:"contactapp-wrap",children:(0,d.jsxs)("div",{className:"contactapp-content",children:[(0,d.jsx)(r,{onSendData:e=>{c(e)},onToggleEdit:k,subscriptions:o}),!e&&(0,d.jsxs)("div",{className:"contactapp-detail-wrap",children:[(0,d.jsx)(h,{onDataFromChild:e=>{j(e)},activeBar:p}),(0,d.jsx)("div",{className:"contact-body",children:(0,d.jsxs)("div",{className:"nicescroll-bar",children:[(0,d.jsx)(f,{subscriptionsArray:t,users:y,onToggleEdit:k,isEdit:v}),(0,d.jsx)("div",{children:(0,d.jsx)(w.A,{itemsPerPage:20,dataFromChild:e=>{c(e)},items:o})})]})})]})]})})})})},k=()=>(0,d.jsx)(l.A,{component:(0,d.jsx)(y,{})})}}]);
//# sourceMappingURL=4179.0f40d225.chunk.js.map