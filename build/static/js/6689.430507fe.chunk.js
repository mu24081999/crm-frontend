"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[6689],{26689:(e,s,t)=>{t.r(s),t.d(s,{default:()=>N});var i=t(72791),d=t(34855),r=t(33833),a=t(94420),c=t(70859),l=t(75985),n=t(13974),o=t(90432),u=t(72426),h=t.n(u),m=t(29750),x=t(49923),p=t(45523),v=t(61134),j=t(763),b=t.n(j),f=t(22316),y=t(80184);const g=()=>{const{handleSubmit:e,watch:s,control:t,setValue:d,formState:{errors:u}}=(0,v.cI)({}),{pushNotification:j}=(0,i.useContext)(m.J),{user:g,token:N}=(0,a.v9)((e=>e.auth)),{users:w}=(0,a.v9)((e=>e.user)),{balanceDetails:_,isLoading:C}=(0,a.v9)((e=>e.balance)),{payments:k}=(0,a.v9)((e=>e.payment)),[A,S]=(0,i.useState)(null),[Y,q]=(0,i.useState)([]),D=(0,a.I0)();(0,i.useEffect)((()=>{D((0,o.sb)(N)),D((0,c.$q)(N))}),[N,D]),(0,i.useEffect)((()=>{const e=null===w||void 0===w?void 0:w.filter((e=>b().toInteger(e.parent_id)===g.id));q(e)}),[w,g]);const I=(null===_||void 0===_?void 0:_.credit)/100;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:"hk-pg-wrapper pb-0",children:(0,y.jsxs)("div",{className:"hk-pg-body py-0",children:[(0,y.jsx)("div",{className:"contactapp-wrap",children:(0,y.jsx)("div",{className:"contactapp-content",children:(0,y.jsx)("div",{className:"d-flex border w-100 justify-content-center",children:(0,y.jsxs)("div",{className:"w-50 m-5",children:[(0,y.jsx)("div",{className:"card shadow-lg border-primary",style:{height:"max-content"},children:(0,y.jsxs)("div",{className:"m-5",style:{fontSize:"25px",fontWeight:"bolder"},children:[(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("div",{className:"float-start mt-2 me-5",children:[(0,y.jsx)("div",{class:"lh-1 text-white bg-primary rounded-circle p-3 d-flex align-items-center justify-content-center",children:(0,y.jsx)(n.oQC,{size:25})})," "]}),(0,y.jsx)("p",{className:"fw-bolder",children:"Available Credit "}),(0,y.jsxs)("span",{children:["$",(null===_||void 0===_?void 0:_.credit)>0?(null===_||void 0===_?void 0:_.credit)/100:0]})]}),(0,y.jsxs)("div",{className:" d-flex gap-1 justify-content-end",children:[(0,y.jsxs)("div",{className:"form-group col-2 pt-1 d-flex",children:[(0,y.jsx)("span",{children:"$"}),(0,y.jsx)("input",{type:"number",className:"form-control p-1 px-2 ",placeholder:"Amount",required:!0,min:10,onChange:e=>S(e.target.value)})]}),A<10?(0,y.jsx)("div",{children:(0,y.jsx)("button",{className:"btn btn-primary btn-sm ",style:{paddingInline:"10px"},onClick:()=>l.Am.error("Please enter credit greater than 10."),children:"Add Credit"})}):(0,y.jsx)("div",{children:(0,y.jsx)("button",{"data-bs-toggle":"modal","data-bs-target":"#add_payment_form",className:"btn btn-primary btn-sm ",style:{paddingInline:"10px"},onClick:()=>{D((0,c.Az)(N,{currency:"usd",amount:100*A}))},children:"Add Credit"})})]}),(0,y.jsxs)("form",{onSubmit:e((async e=>{const s={user_id:g.id,to_user:e.to_user.value,credit:100*e.credit};if(!0===await D((0,o.NK)(N,s))){var t;const s={user_id:g.id,notification:"Your have successfully transfer amount to your subaccount ".concat(null===e||void 0===e||null===(t=e.to_user)||void 0===t?void 0:t.label," of amount $").concat(e.credit),type:"balance_credit"};j(s);const i={user_id:e.to_user.value,notification:"Your account balance has been credited with amount ".concat(e.credit," from account ").concat(g.name),type:"balance_credit"};j(i)}})),className:"border border-primary rounded card-body",children:[(0,y.jsxs)("div",{className:"d-flex gap-3",children:[(0,y.jsx)("div",{className:"col-md-6 col-sm-6",children:(0,y.jsx)(x.Z,{name:"to_user",placeholder:"Asign To",mb:!0,control:t,rules:{required:{value:!0,message:"Field required!"}},options:(null===Y||void 0===Y?void 0:Y.length)>0?null===Y||void 0===Y?void 0:Y.map((e=>({label:e.name,value:e.id}))):[],errors:u})}),(0,y.jsx)("div",{className:"col-md-5 col-sm-6 pt-1",children:(0,y.jsx)(p.Z,{name:"credit",type:"number",placeholder:"Credit Amount",mb:!0,max:I,control:t,rules:{required:{value:!0,message:"Field required!"}},errors:u})})]}),(0,y.jsx)("div",{children:C?(0,y.jsx)(f.Z,{}):(0,y.jsx)("button",{className:"btn btn-primary mt-3",children:"Submit"})})]})]})}),(0,y.jsx)("div",{className:" p-0",style:{height:"100%"},children:(0,y.jsxs)("div",{className:"card",style:{height:"55%"},children:[(0,y.jsx)("div",{className:"card-header bg-primary",children:(0,y.jsx)("div",{className:"card-title text-white fw-bolder",children:"Balance Logs"})}),(0,y.jsx)("div",{className:"card-body",style:{height:"480px",overflow:"scroll",scrollBehavior:"smooth"},children:(0,y.jsxs)("table",{class:"table table-hover",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{className:"sticky-top rounded",children:[(0,y.jsx)("th",{scope:"col",children:"#"}),(0,y.jsx)("th",{scope:"col",children:"Description"}),(0,y.jsx)("th",{scope:"col",children:"Amount Paid"}),(0,y.jsx)("th",{scope:"col",children:"Date"})]})}),(0,y.jsx)("tbody",{children:(null===k||void 0===k?void 0:k.length)>0?null===k||void 0===k?void 0:k.map(((e,s)=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{scope:"row",children:s}),(0,y.jsx)("td",{children:null===e||void 0===e?void 0:e.description}),(0,y.jsx)("td",{children:(null===e||void 0===e?void 0:e.amount)/100}),(0,y.jsx)("td",{children:h()(null===e||void 0===e?void 0:e.created_at).format("DD MMM,YYYY")})]},s))):(0,y.jsx)("p",{children:"No Record"})})]})})]})})]})})})}),(0,y.jsx)(r.Z,{afterPayment:async()=>{const e={user_id:g.id,credit:100*A};if(!0===await D((0,o.KG)(N,e))){const e={user_id:g.id,notification:"Your account balance has been credited with amount $".concat(A),type:"balance_credit"};j(e)}},description:"Credit added"})]})})})},N=()=>(0,y.jsx)(d.Z,{component:(0,y.jsx)(g,{})})}}]);
//# sourceMappingURL=6689.430507fe.chunk.js.map