"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[4238],{50818:(e,s,a)=>{a.d(s,{Z:()=>r});var n=a(72791),t=a(61134),o=a(80184);const l=n.forwardRef(((e,s)=>{const{field:a}=(0,t.bc)(e),{label:n,style:l,defaultValue:r,disabled:i}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(t.Qr,{name:null===e||void 0===e?void 0:e.name,control:null===e||void 0===e?void 0:e.control,rules:null===e||void 0===e?void 0:e.rules,defaultValue:r,render:t=>{let{field:{onChange:r,value:d}}=t;return(0,o.jsxs)("div",{className:" form-check form-check-md ",children:[(0,o.jsx)("label",{className:"form-check-lable",children:n}),(0,o.jsx)("input",{...a,ref:s,checked:"1"===a.value||!0===a.value,type:"checkbox",disabled:i,onChange:s=>{r(s.target.checked),e.onChange&&e.onChange(s)},style:l||{},className:"form-check-input"})]})}})})}));l.displayName="Checkbox";const r=l},23713:(e,s,a)=>{var n=a(72791),t=a(61134),o=a(763),l=a.n(o),r=a(28172),i=a(80184);const d=n.forwardRef(((e,s)=>{const[a,o]=(0,n.useState)([]),[d,c]=(0,n.useState)({}),[h,u]=(0,n.useState)({}),{title:m,style:v,label:g,type:b,errors:p,defaultValue:x,onChange:j,onFocus:f,onBlur:T,menuPlacement:y,ellipses:S,value:k,placeHolder:N,...C}=e,{field:w,fieldState:M,formState:F}=(0,t.bc)(e);let D=l().get(p,e.name);return(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)(t.Qr,{name:null===e||void 0===e?void 0:e.name,rules:null===e||void 0===e?void 0:e.rules,control:null===e||void 0===e?void 0:e.control,defaultValue:x,render:s=>{let{field:{onChange:a}}=s;return(0,i.jsxs)(i.Fragment,{children:[g&&(0,i.jsx)("label",{for:null===e||void 0===e?void 0:e.name,class:"block mb-2 text-sm font-bold text-gray-900 dark:text-white",children:g}),(0,i.jsx)(r.uq,{projectId:"CRM",handleCountryChange:e=>{c(e),a(null===e||void 0===e?void 0:e.code)},handleStateChange:e=>u(e),children:(0,i.jsx)(r.Dz,{label:"Country/Territory",style:{height:"10px"}})})]})}}),e.rules&&D&&e.rules&&null!==D&&void 0!==D&&D.message?(0,i.jsx)("p",{className:" fs-6 p-1 text-danger",id:"email-error",children:e.rules&&D&&e.rules&&(null===D||void 0===D?void 0:D.message)}):""]})}));d.displayName="ReactCountryField"},63218:(e,s,a)=>{a.d(s,{D:()=>r,F:()=>i});var n=a(55294),t=a(58077),o=a(75985);const l="".concat("https://desktopcrm.com:51/v1"),r=e=>async s=>{try{s((0,t.ro)());const a={headers:{"Content-Type":"application/json","x-access-token":e}};await n.Z.get("".concat(l,"/user/calling/user-messages"),a).then((e=>{var a;if(console.log("\ud83d\ude80 ~ .then ~ response:",e),200!==(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.statusCode))return o.Am.error(e.data.message),s((0,t.r6)(e.data.message));s((0,t.qu)(e.data.data.messagesData))}))}catch(a){s((0,t.r6)(a.message))}},i=(e,s)=>async a=>{try{a((0,t.ro)());const r={headers:{"Content-Type":"application/json","x-access-token":e}};await n.Z.post("".concat(l,"/user/calling/user-messages-logs"),s,r).then((e=>{var s;if(console.log("\ud83d\ude80 ~ .then ~ response:",e),200!==(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.statusCode))return o.Am.error(e.data.message),a((0,t.r6)(e.data.message));a((0,t.qu)(e.data.data.messagesData))}))}catch(r){a((0,t.r6)(r.message))}}},14238:(e,s,a)=>{a.r(s),a.d(s,{default:()=>f});var n=a(72791),t=a(34855),o=a(80184);const l=()=>(0,o.jsx)("header",{className:"contact-header",children:(0,o.jsx)("div",{className:"d-flex align-items-center",children:(0,o.jsx)("div",{className:"dropdown",children:(0,o.jsx)("a",{className:"contactapp-title dropdown-toggle link-dark",role:"button",children:(0,o.jsx)("h1",{children:"Messages Logs"})})})})});var r=a(94420),i=a(61765),d=a(22316),c=a(12202),h=a(98911),u=a(72426),m=a.n(u),v=a(57467);const g=e=>{let{isEdit:s,recordingsData:a}=e;const t=(0,r.I0)(),{token:l}=(0,r.v9)((e=>e.auth)),{isLoading:u}=(0,r.v9)((e=>e.calling));(0,n.useEffect)((()=>{l&&(t((0,i.SN)(l)),t((0,h.Rf)(l)))}),[t,l]);const g={21601:"The From phone number is invalid or not a valid, SMS-capable Twilio number.",21602:"The To phone number is not a valid phone number.",21603:"The Body of the message is required and cannot be empty.",21604:"The From phone number is required to send a message.",21605:"The StatusCallback URL is not a valid URL.",21606:"The MessageSid provided is not valid.",21610:"The To phone number has opted out of receiving messages from your Twilio number.",21612:"The To phone number is not currently reachable via SMS.",21614:"The To phone number is not a valid mobile number.",21617:"The From phone number has not been enabled for SMS.",21618:"The MessageSid does not exist.",21620:"The MessagingServiceSid is not valid.",21621:"The MessageBody exceeds the maximum allowed length.",21622:"The Message contains prohibited content.",21627:"The From phone number is not a valid, SMS-capable phone number.",21629:"Cannot send message content due to the carrier filter.",21630:"The From phone number is not enabled for messaging.",21631:"The From phone number is not valid.",21632:"The Message content is too long.",21633:"The From phone number is not a valid Twilio number.",30032:"Your toll-free number has not been Verified to allow sending of traffic in USA and Canada"};return(0,o.jsx)("div",{className:"contact-list-view",children:!s&&(0,o.jsx)(o.Fragment,{children:u?(0,o.jsx)(d.Z,{}):(0,o.jsxs)("table",{"data-sticky-header":!0,className:"table table-responsive w-100 mb-5",children:[(0,o.jsx)("thead",{className:"table-primary shadow-lg",children:(0,o.jsxs)("tr",{className:"sticky-top border rounded",children:[(0,o.jsx)("th",{children:"Date"}),(0,o.jsx)("th",{children:"From"}),(0,o.jsx)("th",{children:"To"}),(0,o.jsx)("th",{children:"Status"}),(0,o.jsx)("th",{children:"Text"}),(0,o.jsx)("th",{children:"Direction"}),(0,o.jsx)("th",{children:"Error Message"}),(0,o.jsx)("th",{children:"Price"})]})}),(0,o.jsx)("tbody",{children:(null===a||void 0===a?void 0:a.length)>0&&(null===a||void 0===a?void 0:a.map((e=>{return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:m()(null===e||void 0===e?void 0:e.dateCreated).format("HH:mm:ss YYYY-MM-DD")}),(0,o.jsx)("td",{children:null===e||void 0===e?void 0:e.from}),(0,o.jsx)("td",{children:null===e||void 0===e?void 0:e.to}),(0,o.jsx)("td",{children:null===e||void 0===e?void 0:e.status}),(0,o.jsx)("td",{children:(0,o.jsx)(v.Z,{trigger:(0,o.jsx)("button",{className:"btn btn-icon btn-floating btn-light btn-sm btn-rounded shadow-lg",id:"dialer_button",children:(0,o.jsx)(c.dSq,{size:"18",style:{marginTop:"-15%"}})}),position:"bottom right",children:(0,o.jsx)("p",{className:"",children:null===e||void 0===e?void 0:e.body})})}),(0,o.jsx)("td",{children:null===e||void 0===e?void 0:e.direction}),(0,o.jsx)("td",{children:(null===e||void 0===e?void 0:e.errorCode)&&(0,o.jsx)(v.Z,{trigger:(0,o.jsx)("button",{className:"btn btn-icon btn-floating btn-light btn-sm btn-rounded shadow-lg",id:"dialer_button",children:(0,o.jsx)(c.dSq,{color:"red",size:"18",style:{marginTop:"-15%"}})}),position:"bottom right",children:(0,o.jsx)("p",{className:"",children:(null===e||void 0===e?void 0:e.errorCode)&&(s=e.errorCode,g[s]||"Unknown error code")})})}),(0,o.jsx)("td",{children:null!==e&&void 0!==e&&e.price?2*parseFloat(null===e||void 0===e?void 0:e.price):0})]});var s})))})]})})})};a(23713),a(50818),a(45523),a(49923);var b=a(41706);var p=a(61134),x=a(63218);const j=()=>{const{handleSubmit:e,watch:s,control:a,setValue:t,formState:{errors:i}}=(0,p.cI)({}),[d,c]=(0,n.useState)([]),[h,u]=(0,n.useState)([]),[m,v]=(0,n.useState)([]),[j,f]=(0,n.useState)(!1),[T,y]=(0,n.useState)(!1),{contacts:S}=(0,r.v9)((e=>e.contact)),{availableNumbers:k,recordings:N}=(0,r.v9)((e=>e.calling)),{token:C,accountSid:w,accountAuthToken:M}=(0,r.v9)((e=>e.auth)),{callLogs:F,isLoading:D}=(0,r.v9)((e=>e.calling)),{messages:E}=(0,r.v9)((e=>e.message));console.log("\ud83d\ude80 ~ MessagesLogsContent ~ messages:",E);const q=(0,r.I0)();(0,n.useMemo)((()=>{q((0,x.F)(C,{accountSid:w,authToken:M}))}),[C,q,M,w]),(0,n.useEffect)((()=>{E.length>0&&c(E)}),[E]),(0,n.useEffect)((()=>{k.length>0&&(u(k),v(k))}),[k]),(0,n.useEffect)((()=>{q((0,b.XA)(C,{accountSid:w,authToken:M}))}),[q,C,w,M]);return(0,o.jsx)("div",{className:"hk-pg-wrapper pb-0",children:(0,o.jsx)("div",{className:"hk-pg-body py-0",children:(0,o.jsx)("div",{className:"contactapp-wrap",children:(0,o.jsx)("div",{className:"contactapp-content",children:!j&&(0,o.jsxs)("div",{className:"contactapp-detail-wrap",children:[(0,o.jsx)(l,{}),(0,o.jsx)("div",{className:"contact-body",children:(0,o.jsx)("div",{"data-simplebar":!0,className:"nicescroll-bar",children:(0,o.jsx)(g,{contactsData:h,onToggleEdit:e=>{f(e)},isEdit:j,recordingsData:d})})})]})})})})})},f=()=>(0,o.jsx)(t.Z,{component:(0,o.jsx)(j,{})})}}]);
//# sourceMappingURL=4238.9e6141b1.chunk.js.map