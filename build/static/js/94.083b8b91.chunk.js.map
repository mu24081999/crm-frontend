{"version":3,"file":"static/js/94.083b8b91.chunk.js","mappings":"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","sources":["views/Auth/verifyEmailOtp.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport brand from \"../../assets/logo-light.png\";\nimport InputField from \"../../components/FormFields/InputField\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  ForgotPassword,\n  loginUser,\n  verifyEmail,\n  verifyOTP,\n} from \"../../redux/services/auth\";\nimport logo from \"./../../assets/3.png\";\n\nconst VerifyEmailOtp = () => {\n  const navigate = useNavigate();\n  const {\n    handleSubmit,\n    // watch,\n    control,\n    // setValue,\n    formState: { errors },\n  } = useForm({});\n  const dispatch = useDispatch();\n  const { email } = useParams();\n  const { token, user } = useSelector((state) => state.auth);\n  useEffect(() => {\n    if (\n      user?.verified === 1 &&\n      user?.role === \"USER\" &&\n      user?.parent_id === null &&\n      user?.client_id === null\n    ) {\n      navigate(\"/plan-selection\"); // Navigate on successful verification\n    } else if (\n      (user?.verified === 1 &&\n        user?.parent_id !== null &&\n        user?.role === \"USER\") ||\n      (user?.verified === 1 &&\n        user?.client_id !== null &&\n        user?.role === \"AGENT\")\n    ) {\n      navigate(\"/\");\n    }\n  }, [navigate, user]);\n  const otpVerificationHandler = async (data) => {\n    const formData = {\n      email: email,\n      otp: data?.otp,\n      // password: user.password,\n    };\n    const verificationSuccess = await dispatch(verifyEmail(formData));\n    if (verificationSuccess?.verified === 1) {\n      // navigate(\"plan-selection\");\n      dispatch(\n        loginUser(\n          verificationSuccess?.email,\n          verificationSuccess?.password,\n          true\n        )\n      );\n    }\n    // const verificationSuccess = await dispatch(verifyOTP(formData));\n    // if (verificationSuccess && user) {\n    //   dispatch(loginUser(user?.email, user?.password, true));\n    // }\n  };\n  const handleResendOTP = () => {\n    const data = {\n      email: email,\n      subject: \"OTP Verification\",\n    };\n    return dispatch(ForgotPassword(data));\n  };\n  return (\n    <div>\n      <div>\n        {/* <!-- Wrapper --> */}\n        <div class=\"hk-wrapper hk-pg-auth\" data-footer=\"simple\">\n          {/* <!-- Main Content --> */}\n          <div class=\"hk-pg-wrapper pt-0 pb-xl-0 pb-5\">\n            <div class=\"hk-pg-body pt-0 pb-xl-0\">\n              {/* <!-- Container --> */}\n              <div class=\"container-xxl\">\n                {/* <!-- Row --> */}\n                <div class=\"row\">\n                  <div class=\"col-sm-10 position-relative mx-auto\">\n                    <div class=\"auth-content py-8\">\n                      <form\n                        class=\"w-100\"\n                        onSubmit={handleSubmit(otpVerificationHandler)}\n                      >\n                        <div class=\"row\">\n                          <div class=\"col-lg-5 col-md-7 col-sm-10 mx-auto\">\n                            <div className=\"menu-header text-center\">\n                              <div className=\"d-flex justify-content-center pb-3\">\n                                <img\n                                  className=\"\"\n                                  src={logo}\n                                  width={300}\n                                  alt=\"brand\"\n                                />\n                              </div>\n                            </div>\n\n                            <div class=\"card card-flush\">\n                              <div class=\"card-body text-center\">\n                                <h4>Verify your OTP</h4>\n                                <p class=\"mb-4\">\n                                  No worries we will mail you 6 digit code to\n                                  your recovery email address to reset your\n                                  password\n                                </p>\n                                <div>\n                                  <p\n                                    className=\"float-end cursor-pointer\"\n                                    onClick={handleResendOTP}\n                                  >\n                                    Resend OTP\n                                  </p>\n                                  <div>\n                                    <InputField\n                                      name=\"otp\"\n                                      placeholder=\"6 digits otp\"\n                                      label=\"OTP\"\n                                      control={control}\n                                      rules={{\n                                        required: {\n                                          value: true,\n                                          message: \"Field required!\",\n                                        },\n                                      }}\n                                      errors={errors}\n                                    />\n                                  </div>\n                                </div>\n                                <button\n                                  type=\"submit\"\n                                  class=\"btn btn-primary btn-uppercase btn-block\"\n                                >\n                                  Verify\n                                </button>\n                                <p class=\"p-xs mt-2 text-center\">\n                                  <Link to=\"/sign-in\">\n                                    <u>Back to login!</u>\n                                  </Link>\n                                </p>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </form>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VerifyEmailOtp;\n"],"names":["VerifyEmailOtp","navigate","useNavigate","handleSubmit","control","formState","errors","useForm","dispatch","useDispatch","email","useParams","token","user","useSelector","state","auth","useEffect","verified","role","parent_id","client_id","_jsx","children","class","onSubmit","async","formData","otp","data","verificationSuccess","verifyEmail","loginUser","password","_jsxs","className","src","logo","width","alt","onClick","handleResendOTP","subject","ForgotPassword","InputField","name","placeholder","label","rules","required","value","message","type","Link","to"],"sourceRoot":""}