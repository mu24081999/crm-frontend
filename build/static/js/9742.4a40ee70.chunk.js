"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9742],{99742:(e,s,t)=>{t.r(s),t.d(s,{default:()=>N});var d=t(82483),i=t(16575),r=t(21942),a=t(91965),c=t(32320),l=t(73422),n=t(22598),o=t(7206),u=t(94690),h=t.n(u),m=t(99492),x=t(42060),p=t(7817),v=t(23080),j=t(34304),b=t.n(j),f=t(710),y=t(56723);const g=()=>{const{handleSubmit:e,watch:s,control:t,setValue:i,formState:{errors:u}}=(0,v.mN)({}),{pushNotification:j}=(0,d.useContext)(m.d),{user:g,token:N}=(0,a.d4)((e=>e.auth)),{users:w}=(0,a.d4)((e=>e.user)),{balanceDetails:_,isLoading:A}=(0,a.d4)((e=>e.balance)),{payments:C}=(0,a.d4)((e=>e.payment)),[k,S]=(0,d.useState)(null),[Y,q]=(0,d.useState)([]),D=(0,a.wA)();(0,d.useEffect)((()=>{D((0,o.r1)(N)),D((0,c.ii)(N))}),[N,D]),(0,d.useEffect)((()=>{const e=null===w||void 0===w?void 0:w.filter((e=>b().toInteger(e.parent_id)===g.id));q(e)}),[w,g]);const I=(null===_||void 0===_?void 0:_.credit)/100;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:"hk-pg-wrapper pb-0",children:(0,y.jsxs)("div",{className:"hk-pg-body py-0",children:[(0,y.jsx)("div",{className:"contactapp-wrap",children:(0,y.jsx)("div",{className:"contactapp-content",children:(0,y.jsx)("div",{className:"d-flex border w-100 justify-content-center",children:(0,y.jsxs)("div",{className:"w-50 m-5",children:[(0,y.jsx)("div",{className:"card shadow-lg border-primary",style:{height:"max-content"},children:(0,y.jsxs)("div",{className:"m-5",style:{fontSize:"25px",fontWeight:"bolder"},children:[(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("div",{className:"float-start mt-2 me-5",children:[(0,y.jsx)("div",{class:"lh-1 text-white bg-primary rounded-circle p-3 d-flex align-items-center justify-content-center",children:(0,y.jsx)(n.z8N,{size:25})})," "]}),(0,y.jsx)("p",{className:"fw-bolder",children:"Available Credit "}),(0,y.jsxs)("span",{children:["$",(null===_||void 0===_?void 0:_.credit)>0?(null===_||void 0===_?void 0:_.credit)/100:0]})]}),(0,y.jsxs)("div",{className:" d-flex gap-1 justify-content-end",children:[(0,y.jsxs)("div",{className:"form-group col-2 pt-1 d-flex",children:[(0,y.jsx)("span",{children:"$"}),(0,y.jsx)("input",{type:"number",className:"form-control p-1 px-2 ",placeholder:"Amount",required:!0,min:10,onChange:e=>S(e.target.value)})]}),k<10?(0,y.jsx)("div",{children:(0,y.jsx)("button",{className:"btn btn-primary btn-sm ",style:{paddingInline:"10px"},onClick:()=>l.oR.error("Please enter credit greater than 10."),children:"Add Credit"})}):(0,y.jsx)("div",{children:(0,y.jsx)("button",{"data-bs-toggle":"modal","data-bs-target":"#add_payment_form",className:"btn btn-primary btn-sm ",style:{paddingInline:"10px"},onClick:()=>{D((0,c.HI)(N,{currency:"usd",amount:100*k}))},children:"Add Credit"})})]}),(0,y.jsxs)("form",{onSubmit:e((async e=>{const s={user_id:g.id,to_user:e.to_user.value,credit:100*e.credit};if(!0===await D((0,o.rB)(N,s))){var t;const s={user_id:g.id,notification:"Your have successfully transfer amount to your subaccount ".concat(null===e||void 0===e||null===(t=e.to_user)||void 0===t?void 0:t.label," of amount $").concat(e.credit),type:"balance_credit"};j(s);const d={user_id:e.to_user.value,notification:"Your account balance has been credited with amount ".concat(e.credit," from account ").concat(g.name),type:"balance_credit"};j(d)}})),className:"border border-primary rounded card-body",children:[(0,y.jsxs)("div",{className:"d-flex gap-3",children:[(0,y.jsx)("div",{className:"col-md-6 col-sm-6",children:(0,y.jsx)(x.A,{name:"to_user",placeholder:"Asign To",mb:!0,control:t,rules:{required:{value:!0,message:"Field required!"}},options:(null===Y||void 0===Y?void 0:Y.length)>0?null===Y||void 0===Y?void 0:Y.map((e=>({label:e.name,value:e.id}))):[],errors:u})}),(0,y.jsx)("div",{className:"col-md-5 col-sm-6 pt-1",children:(0,y.jsx)(p.A,{name:"credit",type:"number",placeholder:"Credit Amount",mb:!0,max:I,control:t,rules:{required:{value:!0,message:"Field required!"}},errors:u})})]}),(0,y.jsx)("div",{children:A?(0,y.jsx)(f.A,{}):(0,y.jsx)("button",{className:"btn btn-primary mt-3",children:"Submit"})})]})]})}),(0,y.jsx)("div",{className:" p-0",style:{height:"100%"},children:(0,y.jsxs)("div",{className:"card",style:{height:"55%"},children:[(0,y.jsx)("div",{className:"card-header bg-primary",children:(0,y.jsx)("div",{className:"card-title text-white fw-bolder",children:"Balance Logs"})}),(0,y.jsx)("div",{className:"card-body",style:{height:"480px",overflow:"scroll",scrollBehavior:"smooth"},children:(0,y.jsxs)("table",{class:"table table-hover",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{className:"sticky-top rounded",children:[(0,y.jsx)("th",{scope:"col",children:"#"}),(0,y.jsx)("th",{scope:"col",children:"Description"}),(0,y.jsx)("th",{scope:"col",children:"Amount Paid"}),(0,y.jsx)("th",{scope:"col",children:"Date"})]})}),(0,y.jsx)("tbody",{children:(null===C||void 0===C?void 0:C.length)>0?null===C||void 0===C?void 0:C.map(((e,s)=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{scope:"row",children:s}),(0,y.jsx)("td",{children:null===e||void 0===e?void 0:e.description}),(0,y.jsx)("td",{children:(null===e||void 0===e?void 0:e.amount)/100}),(0,y.jsx)("td",{children:h()(null===e||void 0===e?void 0:e.created_at).format("DD MMM,YYYY")})]},s))):(0,y.jsx)("p",{children:"No Record"})})]})})]})})]})})})}),(0,y.jsx)(r.A,{afterPayment:async()=>{const e={user_id:g.id,credit:100*k};if(!0===await D((0,o.gs)(N,e))){const e={user_id:g.id,notification:"Your account balance has been credited with amount $".concat(k),type:"balance_credit"};j(e)}},description:"Credit added"})]})})})},N=()=>(0,y.jsx)(i.A,{component:(0,y.jsx)(g,{})})}}]);
//# sourceMappingURL=9742.4a40ee70.chunk.js.map