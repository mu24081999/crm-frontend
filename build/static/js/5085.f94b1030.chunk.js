"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[5085],{71151:(e,a,s)=>{s.d(a,{bO:()=>i,id:()=>r,og:()=>o});var t=s(55294),n=s(25133),c=s(75985);const d="".concat("https://desktopcrm.com:51/v1"),r=(e,a)=>async s=>{try{s((0,n.aR)());const r={headers:{"Content-Type":"application/json","x-access-token":e}};await t.Z.post("".concat(d,"/user/packages/add-package"),a,r).then((a=>{var t;if(200!==(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.statusCode))return c.Am.error(a.data.message),s((0,n.r6)(a.data.message));s((0,n.ZA)(a.data.message)),c.Am.success(a.data.message),s(i(e,a.data.data.id))}))}catch(r){s((0,n.r6)(r.message))}},i=(e,a)=>async s=>{try{s((0,n.aR)());const r={headers:{"Content-Type":"application/json","x-access-token":e}};await t.Z.get("".concat(d,"/user/packages/get-package/").concat(a),r).then((e=>{var a;if(console.log("\ud83d\ude80 ~ .then ~ response:",e),200!==(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.statusCode))return c.Am.error(e.data.message),s((0,n.r6)(e.data.message));s((0,n.NP)(e.data.data.packageDetails))}))}catch(r){s((0,n.r6)(r.message))}},o=(e,a,s)=>async r=>{try{r((0,n.aR)());const o={headers:{"Content-Type":"application/json","x-access-token":e}};await t.Z.put("".concat(d,"/user/packages/update-package/").concat(a),s,o).then((a=>{var s;if(console.log("\ud83d\ude80 ~ .then ~ response:",a),200!==(null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.statusCode))return c.Am.error(a.data.message),r((0,n.r6)(a.data.message));r((0,n.$y)(a.data.message)),c.Am.success(a.data.message),r(i(e,a.data.data.id))}))}catch(o){r((0,n.r6)(o.message))}}},97545:(e,a,s)=>{s.d(a,{LL:()=>r,bo:()=>i,io:()=>o});var t=s(55294),n=s(6871),c=s(75985);const d="".concat("https://desktopcrm.com:51/v1"),r=(e,a)=>async s=>{try{s((0,n.b$)());const r={headers:{"Content-Type":"application/json","x-access-token":e}};return await t.Z.post("".concat(d,"/user/rates/add-rate"),a,r).then((async a=>{var t;return 200!==(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.statusCode)?(c.Am.error(a.data.message),s((0,n.r6)(a.data.message))):(await s((0,n.Bj)(a.data.message)),c.Am.success(a.data.message),await s(o(e,1)),!0)}))}catch(r){s((0,n.r6)(r.message))}},i=(e,a,s)=>async r=>{try{r((0,n.b$)());const i={headers:{"Content-Type":"application/json","x-access-token":e}};return await t.Z.put("".concat(d,"/user/rates/update-rate/").concat(a),s,i).then((async a=>{var s;return 200!==(null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.statusCode)?(c.Am.error(a.data.message),r((0,n.r6)(a.data.message))):(await r((0,n.fb)(a.data.message)),c.Am.success(a.data.message),await r(o(e,1)),!0)}))}catch(i){r((0,n.r6)(i.message))}},o=(e,a)=>async s=>{try{s((0,n.b$)());const r={headers:{"Content-Type":"application/json","x-access-token":e}};await t.Z.get("".concat(d,"/user/rates/plan-rate/").concat(a),r).then((e=>{var a;if(console.log("\ud83d\ude80 ~ .then ~ response:",e),200!==(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.statusCode))return c.Am.error(e.data.message),s((0,n.r6)(e.data.message));s((0,n.LE)(e.data.data.rateDetail))}))}catch(r){s((0,n.r6)(r.message))}}},35085:(e,a,s)=>{s.r(a),s.d(a,{default:()=>v});var t=s(72791),n=s(34855),c=s(45523),d=s(61134),r=(s(2731),s(94420)),i=(s(763),s(97545)),o=s(12202),l=s(71151),m=s(22316),p=s(80184);const u=()=>{const{handleSubmit:e,control:a,setValue:s,formState:{errors:n}}=(0,d.cI)(),u=(0,r.I0)(),{token:v,user_id:g}=(0,r.v9)((e=>e.auth)),{planRates:h}=(0,r.v9)((e=>e.plan_rate)),{isLoading:x,packageDetails:j}=(0,r.v9)((e=>e.package)),[k,b]=(0,t.useState)([{id:"1",name:"",price:"",discount:"",content:[]}]);(0,t.useEffect)((()=>{u((0,l.bO)(v,1))}),[u,v]),(0,t.useEffect)((()=>{if(null!==j&&void 0!==j&&j.id){var e;const a=(null===j||void 0===j?void 0:j.packages)&&(null===(e=JSON.parse(null===j||void 0===j?void 0:j.packages))||void 0===e?void 0:e.packagesDetails);b(a),null===a||void 0===a||a.map((e=>{var a;s("package-name-".concat(e.id),e.name),s("package-price-".concat(e.id),e.price),s("package-discount-".concat(e.id),e.discount),null===e||void 0===e||null===(a=e.content)||void 0===a||a.map(((a,t)=>{s("content-".concat(e.id,"-").concat(t),a)}))}))}}),[j,s]);(0,t.useEffect)((()=>{u((0,i.io)(v,1))}),[u,v]),(0,t.useEffect)((()=>{h&&(s("starter",null===h||void 0===h?void 0:h.starter),s("growth",null===h||void 0===h?void 0:h.growth),s("enterprise",null===h||void 0===h?void 0:h.enterprise))}),[h,s]);return(0,p.jsx)("div",{className:"hk-pg-wrapper pb-0",children:(0,p.jsx)("div",{className:"hk-pg-body py-0",children:(0,p.jsxs)("div",{className:"contactapp-wrap",children:[(0,p.jsx)("div",{className:"border border-1 rounded",children:(0,p.jsx)("header",{className:"taskboard-header pt-3 pb-2 px-4",children:(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("div",{className:"taskboardapp-title link-dark",href:"/",children:(0,p.jsx)("h3",{children:"Packages"})}),(0,p.jsx)("div",{className:"",children:(0,p.jsx)("button",{className:"btn btn-primary",onClick:()=>{null!==j&&void 0!==j&&j.id?u((0,l.og)(v,null===j||void 0===j?void 0:j.id,{packages:{packagesDetails:k},user_id:g})):u((0,l.id)(v,{packages:{packagesDetails:k},user_id:g}))},children:"Submit"})})," "]})})}),(0,p.jsx)("div",{className:"contactapp-content",style:{width:"100%"},children:x?(0,p.jsx)("div",{className:"w-100",children:(0,p.jsx)(m.Z,{})}):(0,p.jsxs)("div",{className:"d-flex gap-5 w-100 p-5",style:{overflow:"scroll"},children:[(null===k||void 0===k?void 0:k.length)>0&&(null===k||void 0===k?void 0:k.map(((e,s)=>{var t,d;return(0,p.jsxs)("div",{className:"card rouded shadow col-md-3 ",style:{height:"max-content"},children:[(0,p.jsxs)("div",{className:"card-header bg-primary",children:[(0,p.jsx)("div",{className:"card-title text-white",children:"Package Details"}),(0,p.jsx)("span",{className:"col-1 p-2 btn btn-icon btn-sm mt-2 btn-danger",onClick:()=>{return a=e.id,void b((e=>null===e||void 0===e?void 0:e.filter((e=>e.id!==a))));var a},children:(0,p.jsx)(o.Xm5,{className:"mb-2"})})]}),(0,p.jsxs)("div",{className:"card-body",children:[(0,p.jsx)("div",{className:"col-sm-12",children:(0,p.jsx)(c.Z,{name:"package-name-".concat(e.id),placeholder:"Name",label:"Package Name",control:a,onChange:a=>{return s=e,t=a.target.value,void b((e=>e.map((e=>e.id===s.id?{...e,name:t}:e))));var s,t},rules:{required:{value:!0,message:"Field required!"}},errors:n})}),(0,p.jsx)("div",{className:"col-sm-12",children:(0,p.jsx)(c.Z,{name:"package-price-".concat(e.id),placeholder:"Price",label:"Package Price",control:a,onChange:a=>{return s=e,t=a.target.value,void b((e=>e.map((e=>e.id===s.id?{...e,price:t}:e))));var s,t},rules:{required:{value:!0,message:"Field required!"}},errors:n})}),(0,p.jsx)("div",{className:"col-sm-12",children:(0,p.jsx)(c.Z,{name:"package-discount-".concat(e.id),placeholder:"Price",type:"number",label:"Yearly Discount Percentage",control:a,onChange:a=>{return s=e,t=a.target.value,void b((e=>e.map((e=>e.id===s.id?{...e,discount:t}:e))));var s,t},rules:{required:{value:!0,message:"Field required!"}},errors:n})}),(0,p.jsx)("div",{className:"title title-xs title-wth-divider text-primary text-uppercase my-4",children:(0,p.jsx)("span",{children:"Package Content"})}),(0,p.jsx)("div",{className:"",children:(null===(t=e.content)||void 0===t?void 0:t.length)>0?null===(d=e.content)||void 0===d?void 0:d.map(((s,t)=>(0,p.jsxs)("div",{className:"col-12 d-flex gap-2",children:[(0,p.jsx)("div",{className:"col-11 py-2",children:(0,p.jsx)(c.Z,{name:"content-".concat(e.id,"-").concat(t),placeholder:"Content Name",onChange:a=>((e,a,s)=>{b((t=>t.map((t=>t.id===e?{...t,content:t.content.map(((e,t)=>t===a?s:e))}:t))))})(e.id,t,a.target.value),mb:!0,control:a,rules:{required:{value:!0,message:"Field required!"}},errors:n})}),(0,p.jsx)("span",{className:"col-1 p-2 btn btn-icon btn-sm mt-2 btn-danger",onClick:()=>((e,a)=>{b((s=>s.map((s=>s.id===e?{...s,content:s.content.filter(((e,s)=>s!==a))}:s))))})(e.id,t),children:(0,p.jsx)(o.Xm5,{className:"mb-2"})})]},t))):(0,p.jsx)("p",{children:"No content added"})}),(0,p.jsxs)("div",{className:" py-2",children:[(0,p.jsxs)("button",{onClick:()=>{return a=e.id,void b((e=>null===e||void 0===e?void 0:e.map((e=>e.id===a?{...e,content:[...e.content,"Package Content"]}:e))));var a},type:"button",className:"btn btn-icon btn-primary btn-xs mb-2",children:[(0,p.jsx)("span",{children:(0,p.jsx)(o.wEH,{})})," "]}),(0,p.jsxs)("span",{className:"text-primary",style:{fontSize:"13px"},children:[" ","Add Content"]})]})]})]},s)}))),(0,p.jsx)("div",{className:"col-md-3 d-flex justify-content-center border rounded",style:{height:"100px"},children:(0,p.jsx)("div",{className:"my-auto border border-primary p-3 rounded",style:{cursor:"pointer"},onClick:()=>{const e={id:(null===k||void 0===k?void 0:k.length)+1,content:[]};b([...k,e])},children:(0,p.jsx)("p",{className:"text-primary",children:"Add Package"})})})]})})]})})})},v=()=>(0,p.jsx)(n.Z,{component:(0,p.jsx)(u,{})})}}]);
//# sourceMappingURL=5085.f94b1030.chunk.js.map