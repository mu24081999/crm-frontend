"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[316],{53276:(e,n,o)=>{o.d(n,{A:()=>p});var t=o(82483);const r=(0,t.createContext)(null);function l(e){let{clientId:n,nonce:o,onScriptLoadSuccess:l,onScriptLoadError:i,children:s}=e;const c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{nonce:n,onScriptLoadSuccess:o,onScriptLoadError:r}=e,[l,i]=(0,t.useState)(!1),s=(0,t.useRef)(o);s.current=o;const c=(0,t.useRef)(r);return c.current=r,(0,t.useEffect)((()=>{const e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=n,e.onload=()=>{var e;i(!0),null===(e=s.current)||void 0===e||e.call(s)},e.onerror=()=>{var e;i(!1),null===(e=c.current)||void 0===e||e.call(c)},document.body.appendChild(e),()=>{document.body.removeChild(e)}}),[n]),l}({nonce:o,onScriptLoadSuccess:l,onScriptLoadError:i}),a=(0,t.useMemo)((()=>({clientId:n,scriptLoadedSuccessfully:c})),[n,c]);return t.createElement(r.Provider,{value:a},s)}function i(){const e=(0,t.useContext)(r);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function s(e){var n;return null!==(n=null===e||void 0===e?void 0:e.clientId)&&void 0!==n?n:null===e||void 0===e?void 0:e.client_id}const c={large:40,medium:32,small:20};function a(e){let{onSuccess:n,onError:o,useOneTap:r,promptMomentNotification:l,type:a="standard",theme:d="outline",size:u="large",text:v,shape:p,logo_alignment:m,width:h,locale:g,click_listener:w,containerProps:f,...x}=e;const j=(0,t.useRef)(null),{clientId:b,scriptLoadedSuccessfully:y}=i(),N=(0,t.useRef)(n);N.current=n;const k=(0,t.useRef)(o);k.current=o;const S=(0,t.useRef)(l);return S.current=l,(0,t.useEffect)((()=>{var e,n,o,t,l,i,c,f,E;if(y)return null===(o=null===(n=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===n?void 0:n.id)||void 0===o||o.initialize({client_id:b,callback:e=>{var n;if(!(null===e||void 0===e?void 0:e.credential))return null===(n=k.current)||void 0===n?void 0:n.call(k);const{credential:o,select_by:t}=e;N.current({credential:o,clientId:s(e),select_by:t})},...x}),null===(i=null===(l=null===(t=null===window||void 0===window?void 0:window.google)||void 0===t?void 0:t.accounts)||void 0===l?void 0:l.id)||void 0===i||i.renderButton(j.current,{type:a,theme:d,size:u,text:v,shape:p,logo_alignment:m,width:h,locale:g,click_listener:w}),r&&(null===(E=null===(f=null===(c=null===window||void 0===window?void 0:window.google)||void 0===c?void 0:c.accounts)||void 0===f?void 0:f.id)||void 0===E||E.prompt(S.current)),()=>{var e,n,o;r&&(null===(o=null===(n=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===n?void 0:n.id)||void 0===o||o.cancel())}}),[b,y,r,a,d,u,v,p,m,h,g]),t.createElement("div",{...f,ref:j,style:{height:c[u],...null===f||void 0===f?void 0:f.style}})}class d extends Error{}function u(e){let n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,n)=>{let o=n.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o})))}(n)}catch(o){return atob(n)}}d.prototype.name="InvalidTokenError";var v=o(56723);const p=e=>{let{onSuccess:n,onFailure:o,auto_select:t,text:r,useOneTap:i}=e;return(0,v.jsx)(l,{clientId:"73457248543-vn1bjkn98qogdcljl35job6ek20e82qt.apps.googleusercontent.com",children:(0,v.jsx)(a,{theme:"outline",shape:"pill",onSuccess:e=>{console.log(e);const o=function(e,n){if("string"!==typeof e)throw new d("Invalid token specified: must be a string");n||(n={});const o=!0===n.header?0:1,t=e.split(".")[o];if("string"!==typeof t)throw new d("Invalid token specified: missing part #".concat(o+1));let r;try{r=u(t)}catch(l){throw new d("Invalid token specified: invalid base64 for part #".concat(o+1," (").concat(l.message,")"))}try{return JSON.parse(r)}catch(l){throw new d("Invalid token specified: invalid json for part #".concat(o+1," (").concat(l.message,")"))}}(e.credential);n(o),console.log(o)},onError:e=>{console.log("Login Failed",e)},auto_select:t,text:r,useOneTap:i})})}},93316:(e,n,o)=>{o.r(n),o.d(n,{default:()=>m});var t=o(82483),r=o(7817),l=o(23080),i=o(91965),s=o(49482),c=o(93376),a=o(99891),d=o(16409),u=o(710),v=o(53276),p=o(56723);const m=()=>{const e=(0,i.wA)(),n=(0,c.Zp)(),{isAuthenticated:o,isLoading:m,user:h}=(0,i.d4)((e=>e.auth)),{handleSubmit:g,control:w,formState:{errors:f}}=(0,l.mN)({});(0,t.useEffect)((()=>{o&&1===(null===h||void 0===h?void 0:h.verified)&&n("/")}),[o,n,h]);return(0,p.jsx)("div",{children:(0,p.jsx)("div",{className:"hk-wrapper hk-pg-auth","data-footer":"simple",children:(0,p.jsx)("div",{className:"hk-pg-wrapper pt-0 pb-xl-0 pb-5",children:(0,p.jsx)("div",{className:"hk-pg-body pt-0 pb-xl-0",children:(0,p.jsx)("div",{className:"container-xxl",children:(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-sm-10 position-relative mx-auto",children:(0,p.jsx)("div",{className:"auth-content py-8",children:(0,p.jsx)("form",{className:"w-100",onSubmit:g((async n=>{const o=await e((0,s.Lx)(null===n||void 0===n?void 0:n.username,null===n||void 0===n?void 0:n.password));o&&(console.log("\ud83d\ude80 ~ signInHandler ~ logged_user:",o),window.location.href="https://app.desktopcrm.com/two-fa-verification/".concat(o.email))})),children:(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-lg-5 col-md-7 col-sm-10 mx-auto",children:(0,p.jsx)("div",{className:"card card-lg card-border",children:(0,p.jsxs)("div",{className:"card-body",children:[(0,p.jsx)("div",{className:"d-flex justify-content-center pb-2",children:(0,p.jsx)("img",{className:" ",src:d,width:300,alt:"brand"})}),(0,p.jsx)("h4",{className:"mb-4 text-center",children:"Sign in to your account"}),!0===m?(0,p.jsx)(u.A,{}):(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"row gx-3",children:[(0,p.jsx)("div",{children:(0,p.jsx)(r.A,{name:"username",placeholder:"Enter username or email",label:"User Name",control:w,rules:{required:{value:!0,message:"Field required!"}},errors:f})}),(0,p.jsxs)("div",{className:"",children:[(0,p.jsx)("div",{className:"float-end",children:(0,p.jsx)(a.N_,{to:"/reset-password",className:"fs-7 fw-medium",children:"Forgot Password ?"})}),(0,p.jsx)(r.A,{name:"password",type:"password",placeholder:"Enter your password",label:"Password",control:w,rules:{required:{value:!0,message:"Field required!"}},errors:f})]})]})}),(0,p.jsx)("input",{type:"submit",className:"btn btn-primary btn-uppercase btn-block bg-primary",value:"Login"}),(0,p.jsx)("div",{className:"text-center py-2",children:"OR"}),(0,p.jsx)("div",{className:"d-flex justify-content-center",children:(0,p.jsx)(v.A,{onSuccess:n=>{e((0,s.Lx)(n.email,"1234567890",!1,"google",n))},onFailure:e=>{console.error("Login failed:",e)},text:"signin_with",auto_select:!0,useOneTap:!0})}),(0,p.jsxs)("p",{className:"p-xs mt-2 text-center",children:["New to DesktopCRM?"," ",(0,p.jsx)(a.N_,{to:"/sign-up",children:(0,p.jsx)("u",{children:"Create new account"})})]})]})})})})})})})})})})})})})}}}]);
//# sourceMappingURL=316.184692a2.chunk.js.map