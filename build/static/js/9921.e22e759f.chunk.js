"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9921],{79921:(e,s,d)=>{d.r(s),d.d(s,{default:()=>_});var a=d(82483),l=d(16575),i=d(21942),c=d(91965),r=d(32320),n=d(73422),t=d(22598),o=d(7206),h=d(94690),m=d.n(h),x=d(99891),p=d(99492),v=d(23080),u=d(42060),j=d(77651),b=d.n(j),g=d(11222),N=d(7583);const y="".concat("https://desktopcrm.com:51/v1"),f=(e,s)=>async d=>{try{d((0,N.QG)());const a={headers:{"Content-Type":"application/json","x-access-token":e}};return await g.A.post("".concat(y,"/user/dashboard/get-pricing"),s,a).then((async e=>{var s;return 200!==(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.statusCode)?(n.oR.error(e.data.message),d((0,N.xk)(e.data.message))):(await d((0,N.r4)(e.data.data.pricingData)),!0)}))}catch(a){d((0,N.xk)(a.message))}};var w=d(710),S=d(56723);const k=e=>{var s,d,a,l,i,r,n,t,o;let{authUser:h,dispatch:m,token:x}=e;const{handleSubmit:p,control:j,formState:{errors:g}}=(0,v.mN)({}),{pricing:N,isLoading:y}=(0,c.d4)((e=>e.pricing));return(0,S.jsxs)("div",{className:"card shadow-lg  m-5",style:{height:"50%",overflow:"scroll"},children:[(0,S.jsx)("div",{className:"card-header bg-primary",children:(0,S.jsx)("div",{className:"card-title text-white",children:"Pricing Generator"})}),(0,S.jsxs)("div",{className:"card-body",children:[(0,S.jsxs)("form",{onSubmit:p((e=>{const s={accountSid:h.accountSid,authToken:h.authToken,country_code:e.country.value};m(f(x,s)),console.log("\ud83d\ude80 ~ handlePriceGeneration ~ data:",s)})),className:"d-flex gap-3 card-body pb-0",children:[(0,S.jsx)("div",{className:"col-md-10 col-sm-6",children:(0,S.jsx)(u.A,{name:"country",placeholder:"Select Country",label:"Generate Pricing by selecting desired country",control:j,errors:g,mb:!1,options:b()().getData()||[],rules:{required:{value:!0,message:"Field required!"}}})}),(0,S.jsx)("div",{className:"pt-5",children:y?(0,S.jsx)(w.A,{}):(0,S.jsx)("button",{className:"btn btn-primary",children:"Submit"})})]}),!y&&N&&(0,S.jsx)("div",{children:(0,S.jsx)("div",{className:"card-body pt-0",children:(0,S.jsxs)("div",{className:"d-flex gap-2",children:[(0,S.jsxs)("div",{className:"col-md-6 col-sm-6",children:[(0,S.jsx)("div",{className:"bg-primary p-2 rounded-top text-white text-center fw-bold",children:"Voice"}),(0,S.jsx)("div",{className:"border border-primary",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:"Inbound Call"}),(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:2*parseFloat(null===N||void 0===N||null===(s=N.voicePricing)||void 0===s||null===(d=s.inboundCallPrices[0])||void 0===d?void 0:d.base_price)||0})]})}),(0,S.jsx)("div",{className:"border border-primary",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:"Outbound Call"}),(0,S.jsxs)("div",{className:"border col-6 text-center p-1",children:[" ",2*parseFloat(null===N||void 0===N||null===(a=N.voicePricing)||void 0===a||null===(l=a.outboundPrefixPrices[1])||void 0===l?void 0:l.base_price)||0]})]})})," "]}),(0,S.jsxs)("div",{className:"col-md-6 col-sm-6",children:[(0,S.jsx)("div",{className:"bg-primary p-2 rounded-top text-white text-center fw-bold",children:"SMS"}),(0,S.jsx)("div",{className:"border border-primary",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:"Inbound SMS"}),(0,S.jsxs)("div",{className:"border col-6 text-center p-1",children:[" ",2*parseFloat(null===N||void 0===N||null===(i=N.smsPricing)||void 0===i||null===(r=i.inboundSmsPrices[0])||void 0===r?void 0:r.base_price)||0]})]})}),(0,S.jsx)("div",{className:"border border-primary",children:(0,S.jsxs)("div",{className:"d-flex",children:[(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:"Outbound SMS"}),(0,S.jsx)("div",{className:"border col-6 text-center p-1",children:2*parseFloat(null===N||void 0===N||null===(n=N.smsPricing)||void 0===n||null===(t=n.outboundSmsPrices[0])||void 0===t||null===(o=t.prices[0])||void 0===o?void 0:o.base_price)||0})]})})," "]})]})})})]})]})},C=()=>{const{pushNotification:e}=(0,a.useContext)(p.d),{user:s,token:d}=(0,c.d4)((e=>e.auth)),{balanceDetails:l}=(0,c.d4)((e=>e.balance)),{payments:h}=(0,c.d4)((e=>e.payment)),[v,u]=(0,a.useState)(null),j=(0,c.wA)();(0,a.useEffect)((()=>{j((0,o.r1)(d)),j((0,r.ii)(d))}),[d,j]);return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{className:"hk-pg-wrapper pb-0",children:(0,S.jsxs)("div",{className:"hk-pg-body py-0",children:[(0,S.jsx)("div",{className:"contactapp-wrap",children:(0,S.jsx)("div",{className:"contactapp-content",children:(0,S.jsxs)("div",{className:"d-flex border w-100",children:[(0,S.jsxs)("div",{className:"w-50 m-5",children:[(0,S.jsx)("div",{className:"card shadow-lg border-primary",style:{height:"max-content"},children:(0,S.jsxs)("div",{className:"m-5",style:{fontSize:"25px",fontWeight:"bolder"},children:[(0,S.jsxs)("div",{className:"",children:[(0,S.jsxs)("div",{className:"float-start mt-2 me-5",children:[(0,S.jsx)("div",{class:"lh-1 text-white bg-primary rounded-circle p-3 d-flex align-items-center justify-content-center",children:(0,S.jsx)(t.z8N,{size:25})})," "]}),(0,S.jsx)("p",{className:"fw-bolder",children:"Available Credit "}),(0,S.jsxs)("span",{children:["$",null!==l&&void 0!==l&&l.credit?(null===l||void 0===l?void 0:l.credit)/100:0]})]}),(0,S.jsxs)("div",{className:"float-end d-flex gap-1 justify-content-end",children:[(0,S.jsxs)("div",{className:"form-group col-6 pt-1 d-flex",children:[(0,S.jsx)("span",{children:"$"}),(0,S.jsx)("input",{type:"number",className:"form-control p-1 px-2 ",placeholder:"Amount",required:!0,min:10,onChange:e=>u(e.target.value)})]}),v<5||v>100?(0,S.jsx)("div",{children:(0,S.jsx)("button",{className:"btn btn-primary btn-sm ",style:{paddingInline:"10px"},onClick:()=>n.oR.error("Amount must be less than equal to 100 and greater than equal to 10"),children:"Add Credit"})}):(0,S.jsx)("div",{children:(0,S.jsx)("button",{"data-bs-toggle":"modal","data-bs-target":"#add_payment_form",className:"btn btn-primary btn-sm ",style:{paddingInline:"10px"},onClick:()=>{j((0,r.HI)(d,{currency:"usd",amount:100*v}))},children:"Add Credit"})})]})]})}),(0,S.jsx)("div",{className:" p-0",style:{height:"100%"},children:(0,S.jsxs)("div",{className:"card",style:{height:"72%"},children:[(0,S.jsx)("div",{className:"card-header bg-primary",children:(0,S.jsx)("div",{className:"card-title text-white fw-bolder",children:"Balance Logs"})}),(0,S.jsx)("div",{className:"card-body",style:{height:"480px",overflow:"scroll",scrollBehavior:"smooth"},children:(0,S.jsxs)("table",{class:"table table-hover",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{className:"sticky-top rounded",children:[(0,S.jsx)("th",{scope:"col",children:"#"}),(0,S.jsx)("th",{scope:"col",children:"Description"}),(0,S.jsx)("th",{scope:"col",children:"Amount Paid"}),(0,S.jsx)("th",{scope:"col",children:"Date"})]})}),(0,S.jsx)("tbody",{children:(null===h||void 0===h?void 0:h.length)>0?null===h||void 0===h?void 0:h.map(((e,s)=>(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{scope:"row",children:s}),(0,S.jsx)("td",{children:null===e||void 0===e?void 0:e.description}),(0,S.jsx)("td",{children:(null===e||void 0===e?void 0:e.amount)/100}),(0,S.jsx)("td",{children:m()(null===e||void 0===e?void 0:e.created_at).format("DD MMM,YYYY")})]},s))):(0,S.jsx)("p",{children:"No Record"})})]})})]})})]}),(0,S.jsxs)("div",{className:"w-50",style:{height:"100%"},children:[(0,S.jsx)(k,{authUser:s,dispatch:j,token:d}),(0,S.jsxs)("div",{className:"card shadow-lg m-5",style:{height:"38%"},children:[(0,S.jsx)("div",{className:"card-header bg-primary",children:(0,S.jsx)("div",{className:"card-title text-white",children:"Usage"})}),(0,S.jsx)("div",{className:"card-body",children:(0,S.jsxs)("div",{id:"accordionSimpleExample",class:"accordion accordion-simple single-email-thread",children:[(0,S.jsxs)("div",{class:"accordion-item",children:[(0,S.jsx)("div",{id:"simple-headingOne",class:"accordion-header",children:(0,S.jsx)("div",{"data-bs-toggle":"collapse","data-bs-target":"#call_usage",role:"button","aria-expanded":"false",className:"px-3 py-3 border fw-bold",children:"Call Usage"})}),(0,S.jsx)("div",{id:"call_usage",class:"accordion-collapse collapse",children:(0,S.jsxs)("div",{class:"accordion-body",children:[" ",(0,S.jsx)(x.N_,{to:"/call-history",children:"Check Call Usage Logs"})]})})]}),(0,S.jsxs)("div",{class:"accordion-item",children:[(0,S.jsx)("div",{id:"simple-headingOne",class:"accordion-header",children:(0,S.jsx)("div",{"data-bs-toggle":"collapse","data-bs-target":"#sms_usage",role:"button","aria-expanded":"false",className:"px-3 py-3 border fw-bold ",children:"SMS Usage"})}),(0,S.jsx)("div",{id:"sms_usage",class:"accordion-collapse collapse",children:(0,S.jsxs)("div",{class:"accordion-body",children:[" ",(0,S.jsx)(x.N_,{to:"/messages-logs",children:"Check SMS Usage Logs"})]})})]})]})})]})]})]})})}),(0,S.jsx)(i.A,{afterPayment:async()=>{const a={user_id:s.id,credit:100*v};if(!0===await j((0,o.gs)(d,a))){const d={user_id:s.id,notification:"Your account balance has been credited with amount $".concat(v),type:"balance_credit"};e(d)}},description:"Credit added"})]})})})},_=()=>(0,S.jsx)(l.A,{component:(0,S.jsx)(C,{})})}}]);
//# sourceMappingURL=9921.e22e759f.chunk.js.map